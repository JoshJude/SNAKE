(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&e(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const s=32,c=32,f=8,a=s*f+c*2,A="#77EE33",g="#000000",h={snake:[{x:s/2+2,y:s/2-1},{x:s/2+1,y:s/2-1},{x:s/2,y:s/2-1},{x:s/2-1,y:s/2-1}],food:{x:0,y:0},direction:"right",nextDirection:"right",paused:!1,gameOver:!0,score:0,speed:250};document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("game");l.width=a,l.height=a;const t=l.getContext("2d");if(!t){alert("Could not get canvas context!");return}let e={...h};const o=()=>{E(),i(),requestAnimationFrame(o)},i=()=>{y(),e.gameOver?w():e.paused?v():O()},d=n=>{t.fillStyle=g,t.fillRect(n.x*f+c,n.y*f+c,f,f)},y=()=>{const n=Math.min(globalThis.innerWidth,globalThis.innerHeight);l.style.width=`${n}px`,l.style.height=`${n}px`,t.fillStyle=A,t.fillRect(0,0,a,a),t.fillStyle=g,t.strokeStyle=g,t.strokeRect(c,c,a-c*2,a-c*2),t.font="12pt Monospace",t.textAlign="left",t.fillText("SNAKE",c,c-4),t.fillText(`SCORE: ${e.score}`,c,a-16)},O=()=>{e.snake.forEach(n=>{d(n)}),d(e.food)},v=()=>{t.font="12pt Monospace",t.textAlign="center",t.fillText("PAUSED",a/2,a/2)},w=()=>{t.font="12pt Monospace",t.textAlign="center",t.fillText("PRESS SPACE TO START",a/2,a/2)},m=()=>{console.log("GET RANDOM POSITION");const n=Math.floor(Math.random()*s),r=Math.floor(Math.random()*s),u={x:n,y:r};return e.snake.some(S=>p(S,u))?m():u},p=(n,r)=>n.x===r.x&&n.y===r.y,E=()=>{if(e.paused||e.gameOver)return;const n=Date.now();if(e.lastMoveTime&&n-e.lastMoveTime<e.speed)return;e.lastMoveTime=n,e.direction=e.nextDirection;const r={...e.snake[0]};switch(e.direction){case"up":r.y=(r.y-1+s)%s;break;case"down":r.y=(r.y+1)%s;break;case"left":r.x=(r.x-1+s)%s;break;case"right":r.x=(r.x+1)%s;break}e.snake.some(u=>p(u,r))?e.gameOver=!0:p(r,e.food)?(e.snake.unshift(r),e.score+=1,e.speed=Math.max(50,e.speed-10),e.food=m()):(e.snake.unshift(r),e.snake.pop())};globalThis.addEventListener("keydown",n=>{switch(n.code){case"ArrowUp":if(e.direction==="down"||e.paused||e.gameOver)return;e.nextDirection="up";break;case"ArrowDown":if(e.direction==="up"||e.paused||e.gameOver)return;e.nextDirection="down";break;case"ArrowLeft":if(e.direction==="right"||e.paused||e.gameOver)return;e.nextDirection="left";break;case"ArrowRight":if(e.direction==="left"||e.paused||e.gameOver)return;e.nextDirection="right";break;case"Space":e.gameOver?(e={...h},e.food=m(),e.gameOver=!1):e.paused=!e.paused;break}}),o()});
